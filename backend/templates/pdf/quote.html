<div class="header">
  <div class="logo-section">
    {{#if logoBase64}}
    <img src="{{logoBase64}}" alt="TreePro AI" class="logo">
    {{/if}}
    <div class="company-info">
      <h1>{{companyName}}</h1>
      <p>{{companyPhone}}</p>
      <p>{{companyEmail}}</p>
      <p>{{companyAddress}}</p>
    </div>
  </div>
  <div class="document-meta">
    <div class="document-type">Quote</div>
    <div class="document-number">#{{quoteNumber}}</div>
    <div class="document-date">Created: {{createdDate}}</div>
    <div class="document-date">Valid Until: {{validUntil}}</div>
    <div style="margin-top: 8px;">
      <span class="status-badge {{statusClass}}">{{status}}</span>
    </div>
  </div>
</div>

<div class="content">
  <div class="info-grid">
    <div class="info-box">
      <h3>Prepared For</h3>
      <p class="name">{{customerName}}</p>
      {{#if customerEmail}}
      <p>{{customerEmail}}</p>
      {{/if}}
      {{#if customerPhone}}
      <p>{{customerPhone}}</p>
      {{/if}}
    </div>
    <div class="info-box">
      <h3>Service Location</h3>
      <p>{{jobLocation}}</p>
    </div>
  </div>

  <div class="section">
    <h3 class="section-title">Services &amp; Pricing</h3>
    <table>
      <thead>
        <tr>
          <th style="width: 45%">Description</th>
          <th style="width: 15%; text-align: center;">Qty</th>
          <th style="width: 20%; text-align: right;">Unit Price</th>
          <th style="width: 20%">Amount</th>
        </tr>
      </thead>
      <tbody>
        {{lineItemsHtml}}
      </tbody>
    </table>
  </div>

  <div class="totals-section">
    <div class="totals-box">
      <div class="totals-row subtotal">
        <span>Subtotal</span>
        <span>{{subtotal}}</span>
      </div>
      {{#if discountAmount}}
      <div class="totals-row">
        <span>Discount {{#if discountPercentage}}({{discountPercentage}}%){{/if}}</span>
        <span>-{{discountAmount}}</span>
      </div>
      {{/if}}
      {{#if taxAmount}}
      <div class="totals-row">
        <span>Tax ({{taxRate}}%)</span>
        <span>{{taxAmount}}</span>
      </div>
      {{/if}}
      <div class="totals-row grand-total">
        <span>Grand Total</span>
        <span>{{grandTotal}}</span>
      </div>
      {{#if depositAmount}}
      <div class="totals-row">
        <span>Deposit Required</span>
        <span>{{depositAmount}}</span>
      </div>
      {{/if}}
    </div>
  </div>

  {{#if specialInstructions}}
  <div class="notes-section">
    <h4>Special Instructions</h4>
    <p>{{specialInstructions}}</p>
  </div>
  {{/if}}

  {{#if termsAndConditions}}
  <div class="terms-section">
    <h4>Terms &amp; Conditions</h4>
    <p>{{termsAndConditions}}</p>
  </div>
  {{/if}}

  <div class="signature-section">
    <div class="signature-box">
      <p>Customer Signature</p>
    </div>
    <div class="signature-box">
      <p>Date</p>
    </div>
  </div>
</div>

<div class="footer">
  <div class="footer-left">
    <span>Quote #{{quoteNumber}}</span>
    <span>|</span>
    <span>Valid Until: {{validUntil}}</span>
  </div>
  <span>Generated by TreePro AI</span>
</div>
