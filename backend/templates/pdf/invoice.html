<div class="header">
  <div class="logo-section">
    {{#if logoBase64}}
    <img src="{{logoBase64}}" alt="TreePro AI" class="logo">
    {{/if}}
    <div class="company-info">
      <h1>{{companyName}}</h1>
      <p>{{companyPhone}}</p>
      <p>{{companyEmail}}</p>
      <p>{{companyAddress}}</p>
    </div>
  </div>
  <div class="document-meta">
    <div class="document-type">Invoice</div>
    <div class="document-number">#{{invoiceNumber}}</div>
    <div class="document-date">Issue Date: {{issueDate}}</div>
    <div class="document-date">Due Date: {{dueDate}}</div>
    <div style="margin-top: 8px;">
      <span class="status-badge {{statusClass}}">{{status}}</span>
    </div>
  </div>
</div>

<div class="content">
  <div class="info-grid">
    <div class="info-box">
      <h3>Bill To</h3>
      <p class="name">{{customerName}}</p>
      {{#if customerEmail}}
      <p>{{customerEmail}}</p>
      {{/if}}
      {{#if customerPhone}}
      <p>{{customerPhone}}</p>
      {{/if}}
      {{#if customerAddress}}
      <p>{{customerAddress}}</p>
      {{/if}}
    </div>
    <div class="info-box">
      <h3>Payment Information</h3>
      <p><strong>Payment Terms:</strong> {{paymentTerms}}</p>
      <p><strong>Due Date:</strong> {{dueDate}}</p>
      {{#if amountPaid}}
      <p><strong>Amount Paid:</strong> {{amountPaid}}</p>
      {{/if}}
      {{#if amountDue}}
      <p style="color: #dc2626; font-weight: 600;"><strong>Amount Due:</strong> {{amountDue}}</p>
      {{/if}}
    </div>
  </div>

  <div class="section">
    <h3 class="section-title">Invoice Details</h3>
    <table>
      <thead>
        <tr>
          <th style="width: 45%">Description</th>
          <th style="width: 15%; text-align: center;">Qty</th>
          <th style="width: 20%; text-align: right;">Unit Price</th>
          <th style="width: 20%">Amount</th>
        </tr>
      </thead>
      <tbody>
        {{lineItemsHtml}}
      </tbody>
    </table>
  </div>

  <div class="totals-section">
    <div class="totals-box">
      <div class="totals-row subtotal">
        <span>Subtotal</span>
        <span>{{subtotal}}</span>
      </div>
      {{#if discountAmount}}
      <div class="totals-row">
        <span>Discount {{#if discountPercentage}}({{discountPercentage}}%){{/if}}</span>
        <span>-{{discountAmount}}</span>
      </div>
      {{/if}}
      {{#if taxAmount}}
      <div class="totals-row">
        <span>Tax ({{taxRate}}%)</span>
        <span>{{taxAmount}}</span>
      </div>
      {{/if}}
      <div class="totals-row grand-total">
        <span>Grand Total</span>
        <span>{{grandTotal}}</span>
      </div>
      {{#if amountPaid}}
      <div class="totals-row" style="color: #059669;">
        <span>Amount Paid</span>
        <span>{{amountPaid}}</span>
      </div>
      {{/if}}
      {{#if amountDue}}
      <div class="totals-row" style="color: #dc2626; font-weight: 600;">
        <span>Balance Due</span>
        <span>{{amountDue}}</span>
      </div>
      {{/if}}
    </div>
  </div>

  {{#if notes}}
  <div class="notes-section">
    <h4>Notes</h4>
    <p>{{notes}}</p>
  </div>
  {{/if}}

  <div class="terms-section">
    <h4>Payment Instructions</h4>
    <p>Please make payment by the due date. If you have any questions regarding this invoice, please contact us.</p>
    {{#if paymentTerms}}
    <p style="margin-top: 8px;"><strong>Terms:</strong> {{paymentTerms}}</p>
    {{/if}}
  </div>
</div>

<div class="footer">
  <div class="footer-left">
    <span>Invoice #{{invoiceNumber}}</span>
    <span>|</span>
    <span>Due: {{dueDate}}</span>
  </div>
  <span>Generated by TreePro AI</span>
</div>
